{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport { take } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/cart.service\";\nimport * as i2 from \"../../services/order.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nfunction CheckoutPageComponent_div_3_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4)(1, \"p\");\n    i0.ɵɵtext(2, \"Your cart is empty. Nothing to check out.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"a\", 5);\n    i0.ɵɵtext(4, \"Go Shopping\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction CheckoutPageComponent_div_3_ng_template_2_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"span\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"currency\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const item_r7 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", item_r7.product.name, \" (x\", item_r7.quantity, \")\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(5, 3, item_r7.product.price * item_r7.quantity, \"USD\"));\n  }\n}\nfunction CheckoutPageComponent_div_3_ng_template_2_p_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r6.errorMessage, \" \");\n  }\n}\nfunction CheckoutPageComponent_div_3_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 6);\n    i0.ɵɵtemplate(1, CheckoutPageComponent_div_3_ng_template_2_div_1_Template, 6, 6, \"div\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"div\", 8)(3, \"strong\");\n    i0.ɵɵtext(4, \"Total:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"strong\");\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"currency\");\n    i0.ɵɵpipe(8, \"async\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function CheckoutPageComponent_div_3_ng_template_2_Template_button_click_9_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.placeOrder());\n    });\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(11, CheckoutPageComponent_div_3_ng_template_2_p_11_Template, 2, 1, \"p\", 10);\n  }\n  if (rf & 2) {\n    const items_r1 = i0.ɵɵnextContext().ngIf;\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", items_r1);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(7, 5, i0.ɵɵpipeBind1(8, 8, ctx_r4.totalPrice$), \"USD\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"disabled\", ctx_r4.isPlacingOrder);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r4.isPlacingOrder ? \"Placing Order...\" : \"Place Order\", \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.errorMessage);\n  }\n}\nfunction CheckoutPageComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, CheckoutPageComponent_div_3_div_1_Template, 5, 0, \"div\", 2);\n    i0.ɵɵtemplate(2, CheckoutPageComponent_div_3_ng_template_2_Template, 12, 10, \"ng-template\", null, 3, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const items_r1 = ctx.ngIf;\n    const _r3 = i0.ɵɵreference(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", items_r1.length === 0)(\"ngIfElse\", _r3);\n  }\n}\nexport class CheckoutPageComponent {\n  constructor(cartService, orderService, router) {\n    this.cartService = cartService;\n    this.orderService = orderService;\n    this.router = router;\n    this.isPlacingOrder = false;\n    this.errorMessage = null;\n    this.cartItems$ = this.cartService.cartItems$;\n    this.totalPrice$ = this.cartService.totalPrice$;\n  }\n  placeOrder() {\n    this.isPlacingOrder = true;\n    this.errorMessage = null;\n    this.cartItems$.pipe(take(1)).subscribe({\n      next: items => {\n        if (items.length === 0) {\n          this.errorMessage = 'Your cart is empty.';\n          this.isPlacingOrder = false;\n          return;\n        }\n        this.orderService.placeOrder(items).subscribe({\n          next: response => {\n            console.log('Order placed successfully!', response);\n            // --- THIS IS THE CHANGE ---\n            // 1. REMOVE the old alert box:\n            // alert('Thank you for your order! It has been placed successfully.');\n            this.cartService.clearCart();\n            // 2. REDIRECT to the new confirmation page with the orderId from the backend.\n            this.router.navigate(['/order-confirmation', response.publicOrderId]);\n            // -------------------------\n            this.isPlacingOrder = false;\n          },\n          error: err => {\n            console.error('Failed to place order', err);\n            this.errorMessage = 'There was a problem placing your order. Please try again.';\n            this.isPlacingOrder = false;\n          }\n        });\n      }\n    });\n  }\n  static {\n    this.ɵfac = function CheckoutPageComponent_Factory(t) {\n      return new (t || CheckoutPageComponent)(i0.ɵɵdirectiveInject(i1.CartService), i0.ɵɵdirectiveInject(i2.OrderService), i0.ɵɵdirectiveInject(i3.Router));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: CheckoutPageComponent,\n      selectors: [[\"app-checkout-page\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 5,\n      vars: 3,\n      consts: [[1, \"card\", \"checkout-container\"], [4, \"ngIf\"], [\"class\", \"empty-summary\", 4, \"ngIf\", \"ngIfElse\"], [\"summaryContent\", \"\"], [1, \"empty-summary\"], [\"routerLink\", \"/kits\", 1, \"btn-primary\"], [1, \"summary-items-list\"], [\"class\", \"summary-item\", 4, \"ngFor\", \"ngForOf\"], [1, \"summary-total\"], [1, \"btn-primary\", \"place-order-btn\", 3, \"disabled\", \"click\"], [\"class\", \"error-message\", 4, \"ngIf\"], [1, \"summary-item\"], [1, \"error-message\"]],\n      template: function CheckoutPageComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n          i0.ɵɵtext(2, \"Checkout Summary\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(3, CheckoutPageComponent_div_3_Template, 4, 2, \"div\", 1);\n          i0.ɵɵpipe(4, \"async\");\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(4, 1, ctx.cartItems$));\n        }\n      },\n      dependencies: [CommonModule, i4.NgForOf, i4.NgIf, i4.AsyncPipe, i4.CurrencyPipe, RouterModule, i3.RouterLink],\n      styles: [\"h2[_ngcontent-%COMP%] {\\n    text-align: center;\\n    margin-bottom: 2rem;\\n    font-size: 2.5rem;\\n    font-weight: 700;\\n}\\n\\n.checkout-container[_ngcontent-%COMP%] {\\n    max-width: 700px;\\n    margin: 2rem auto;\\n}\\n\\n.empty-summary[_ngcontent-%COMP%] {\\n    text-align: center;\\n    padding: 2rem;\\n}\\n\\n.empty-summary[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\n    font-size: 1.2rem;\\n    margin-bottom: 2rem;\\n}\\n\\n.summary-items-list[_ngcontent-%COMP%] {\\n    display: flex;\\n    flex-direction: column;\\n    gap: 1rem;\\n    margin-bottom: 1.5rem;\\n}\\n\\n.summary-item[_ngcontent-%COMP%] {\\n    display: flex;\\n    justify-content: space-between;\\n    padding-bottom: 1rem;\\n    border-bottom: 1px solid var(--subtle-borders);\\n}\\n\\n.summary-item[_ngcontent-%COMP%]:last-child {\\n    border-bottom: none;\\n}\\n\\n.summary-total[_ngcontent-%COMP%] {\\n    display: flex;\\n    justify-content: space-between;\\n    font-size: 1.5rem;\\n    font-weight: 700;\\n    padding: 1.5rem 0;\\n    border-top: 1px solid var(--subtle-borders);\\n}\\n\\n.place-order-btn[_ngcontent-%COMP%] {\\n    width: 100%;\\n    margin-top: 1rem;\\n}\\n\\n.error-message[_ngcontent-%COMP%] {\\n    color: #f87171;\\n    background-color: rgba(248, 113, 113, 0.1);\\n    border: 1px solid #f87171;\\n    border-radius: 8px;\\n    padding: 1rem;\\n    margin-top: 1rem;\\n    text-align: center;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvY2hlY2tvdXQvY2hlY2tvdXQuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLGtCQUFrQjtJQUNsQixtQkFBbUI7SUFDbkIsaUJBQWlCO0lBQ2pCLGdCQUFnQjtBQUNwQjs7QUFFQTtJQUNJLGdCQUFnQjtJQUNoQixpQkFBaUI7QUFDckI7O0FBRUE7SUFDSSxrQkFBa0I7SUFDbEIsYUFBYTtBQUNqQjs7QUFFQTtJQUNJLGlCQUFpQjtJQUNqQixtQkFBbUI7QUFDdkI7O0FBRUE7SUFDSSxhQUFhO0lBQ2Isc0JBQXNCO0lBQ3RCLFNBQVM7SUFDVCxxQkFBcUI7QUFDekI7O0FBRUE7SUFDSSxhQUFhO0lBQ2IsOEJBQThCO0lBQzlCLG9CQUFvQjtJQUNwQiw4Q0FBOEM7QUFDbEQ7O0FBRUE7SUFDSSxtQkFBbUI7QUFDdkI7O0FBRUE7SUFDSSxhQUFhO0lBQ2IsOEJBQThCO0lBQzlCLGlCQUFpQjtJQUNqQixnQkFBZ0I7SUFDaEIsaUJBQWlCO0lBQ2pCLDJDQUEyQztBQUMvQzs7QUFFQTtJQUNJLFdBQVc7SUFDWCxnQkFBZ0I7QUFDcEI7O0FBRUE7SUFDSSxjQUFjO0lBQ2QsMENBQTBDO0lBQzFDLHlCQUF5QjtJQUN6QixrQkFBa0I7SUFDbEIsYUFBYTtJQUNiLGdCQUFnQjtJQUNoQixrQkFBa0I7QUFDdEIiLCJzb3VyY2VzQ29udGVudCI6WyJoMiB7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIG1hcmdpbi1ib3R0b206IDJyZW07XG4gICAgZm9udC1zaXplOiAyLjVyZW07XG4gICAgZm9udC13ZWlnaHQ6IDcwMDtcbn1cblxuLmNoZWNrb3V0LWNvbnRhaW5lciB7XG4gICAgbWF4LXdpZHRoOiA3MDBweDtcbiAgICBtYXJnaW46IDJyZW0gYXV0bztcbn1cblxuLmVtcHR5LXN1bW1hcnkge1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBwYWRkaW5nOiAycmVtO1xufVxuXG4uZW1wdHktc3VtbWFyeSBwIHtcbiAgICBmb250LXNpemU6IDEuMnJlbTtcbiAgICBtYXJnaW4tYm90dG9tOiAycmVtO1xufVxuXG4uc3VtbWFyeS1pdGVtcy1saXN0IHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgZ2FwOiAxcmVtO1xuICAgIG1hcmdpbi1ib3R0b206IDEuNXJlbTtcbn1cblxuLnN1bW1hcnktaXRlbSB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgcGFkZGluZy1ib3R0b206IDFyZW07XG4gICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLXN1YnRsZS1ib3JkZXJzKTtcbn1cblxuLnN1bW1hcnktaXRlbTpsYXN0LWNoaWxkIHtcbiAgICBib3JkZXItYm90dG9tOiBub25lO1xufVxuXG4uc3VtbWFyeS10b3RhbCB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgZm9udC1zaXplOiAxLjVyZW07XG4gICAgZm9udC13ZWlnaHQ6IDcwMDtcbiAgICBwYWRkaW5nOiAxLjVyZW0gMDtcbiAgICBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tc3VidGxlLWJvcmRlcnMpO1xufVxuXG4ucGxhY2Utb3JkZXItYnRuIHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBtYXJnaW4tdG9wOiAxcmVtO1xufVxuXG4uZXJyb3ItbWVzc2FnZSB7XG4gICAgY29sb3I6ICNmODcxNzE7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNDgsIDExMywgMTEzLCAwLjEpO1xuICAgIGJvcmRlcjogMXB4IHNvbGlkICNmODcxNzE7XG4gICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgIHBhZGRpbmc6IDFyZW07XG4gICAgbWFyZ2luLXRvcDogMXJlbTtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}","map":{"version":3,"mappings":"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","names":["CommonModule","RouterModule","take","i0","CheckoutPageComponent","constructor","cartService","orderService","router","cartItems$","totalPrice$","placeOrder","isPlacingOrder","errorMessage","pipe","subscribe","next","items","length","response","console","log","clearCart","navigate","publicOrderId","error","err","selectors","standalone","features","decls","vars","consts","template","styles"],"sourceRoot":"","sources":["C:\\Woxsen\\DevOPS Project\\E-Commerce-Website\\frontend\\src\\app\\pages\\checkout\\checkout.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Router, RouterModule } from '@angular/router';\nimport { Observable, take } from 'rxjs';\nimport { CartService, CartItem } from '../../services/cart.service';\nimport { OrderService } from '../../services/order.service';\n\n@Component({\n  selector: 'app-checkout-page',\n  standalone: true,\n  imports: [CommonModule, RouterModule],\n  template: `\n    <div class=\"card checkout-container\">\n      <h2>Checkout Summary</h2>\n      <div *ngIf=\"(cartItems$ | async) as items\">\n        <div *ngIf=\"items.length === 0; else summaryContent\" class=\"empty-summary\">\n          <p>Your cart is empty. Nothing to check out.</p>\n          <a routerLink=\"/kits\" class=\"btn-primary\">Go Shopping</a>\n        </div>\n        \n        <ng-template #summaryContent>\n          <!-- List of items in the cart -->\n          <div class=\"summary-items-list\">\n            <div class=\"summary-item\" *ngFor=\"let item of items\">\n              <span>{{ item.product.name }} (x{{ item.quantity }})</span>\n              <span>{{ (item.product.price * item.quantity) | currency:'USD' }}</span>\n            </div>\n          </div>\n          \n          <!-- Total price -->\n          <div class=\"summary-total\">\n            <strong>Total:</strong>\n            <strong>{{ (totalPrice$ | async) | currency:'USD' }}</strong>\n          </div>\n          \n          <!-- Place Order Button with loading state -->\n          <button (click)=\"placeOrder()\" [disabled]=\"isPlacingOrder\" class=\"btn-primary place-order-btn\">\n            {{ isPlacingOrder ? 'Placing Order...' : 'Place Order' }}\n          </button>\n          \n          <!-- Error message display -->\n          <p *ngIf=\"errorMessage\" class=\"error-message\">\n            {{ errorMessage }}\n          </p>\n        </ng-template>\n      </div>\n    </div>\n  `,\n  styleUrls: ['./checkout.component.css']\n})\nexport class CheckoutPageComponent {\n  cartItems$: Observable<CartItem[]>;\n  totalPrice$: Observable<number>;\n  isPlacingOrder = false;\n  errorMessage: string | null = null;\n\n  constructor(\n    private cartService: CartService,\n    private orderService: OrderService,\n    private router: Router\n  ) {\n    this.cartItems$ = this.cartService.cartItems$;\n    this.totalPrice$ = this.cartService.totalPrice$;\n  }\n\n  placeOrder(): void {\n    this.isPlacingOrder = true;\n    this.errorMessage = null;\n\n    this.cartItems$.pipe(take(1)).subscribe({\n      next: (items) => {\n        if (items.length === 0) {\n          this.errorMessage = 'Your cart is empty.';\n          this.isPlacingOrder = false;\n          return;\n        }\n\n        this.orderService.placeOrder(items).subscribe({\n          next: (response) => {\n            console.log('Order placed successfully!', response);\n            \n            // --- THIS IS THE CHANGE ---\n            // 1. REMOVE the old alert box:\n            // alert('Thank you for your order! It has been placed successfully.');\n            \n            this.cartService.clearCart(); \n\n            // 2. REDIRECT to the new confirmation page with the orderId from the backend.\n            this.router.navigate(['/order-confirmation', response.publicOrderId]);\n            // -------------------------\n\n            this.isPlacingOrder = false;\n          },\n          error: (err) => {\n            console.error('Failed to place order', err);\n            this.errorMessage = 'There was a problem placing your order. Please try again.';\n            this.isPlacingOrder = false;\n          }\n        });\n      }\n    });\n  }\n}\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}